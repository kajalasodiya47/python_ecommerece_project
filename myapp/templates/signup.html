{% extends "header.html" %}
{% load static %}
{% block content %}
<br>
<br>
<br>
<head>
    <style>
    .error {
        color: red;
    }
    </style>
</head>
	<!-- Title page -->
	<section class="bg-img1 txt-center p-lr-15 p-tb-92" style="background-image: url('{% static 'images/bg-01.jpg'%}');">
		<h2 class="ltext-105 cl0 txt-center">
			Signup
		</h2>
	</section>	

<!-- Content page -->

<!-- Content page -->
<section class="bg0 p-t-104 p-b-116" >
    <div class="container" >
        <div class="flex-w flex-tr justify-content-center">
            <div class="size-210 bor10 p-lr-70 p-t-55 p-b-70 p-lr-15-lg w-full-md">
                {% if msg %}
                <div class="alert alert-success" role="alert">
                    {{msg}}
                </div>
                {% elif msg1 %}
                <div class="alert alert-danger" role="alert">
                    {{msg1}}
                </div>
                {% endif %}
                <form method="post" onsubmit="return validateForm()" action="{% url 'signup' %}">
                    {% csrf_token %}
                    <h4 class="mtext-105 cl2 txt-center p-b-30">
                        Signup
                    </h4>
                    <div class="bor8 m-b-20 how-pos4-parent">
                       <select name="role"class="form-control">
                        <option value="buyer">Buyer</option>
                        <option value="seller">Seller</option>
                       </select> 
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="text" name="email" placeholder="Enter Email" id="email">
                    </div>
                    <span id="emailError" class="error"></span>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="text" name="firstname" placeholder="Enter First Name" id="fname">
                    </div>
                    <span id="fnameError" class="error"></span>

                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="text" name="lastname" placeholder="Enter Last Name" id="lname">
                    </div>
                    <span id="lnameError" class="error"></span>

                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="number" name="mobile" placeholder="Enter Mobile Number" id="mobile">
                    </div>
                    <span id="mobileError" class="error"></span>

                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="password" name="cpassword" placeholder="Enter Password" id="password">
                    </div>
                    <span id="passwordError" class="error"></span>
                    

                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="password" name="password" placeholder="Enter Confirm Password" id="cpassword">
                    </div>
                    <span id="cpasswordError" class="error"></span>

                    <button class="flex-c-m stext-101 cl0 size-121 bg3 bor1 hov-btn3 p-lr-15 trans-04 pointer" type="submit">
                        Signup
                    </button>
                </form>
                <script>
                    function validateForm() {
                        var email = document.getElementById("email").value;
                        var fname = document.getElementById("fname").value;
                        var lname = document.getElementById("lname").value;
                        var mobile = document.getElementById("mobile").value;
                        var password = document.getElementById("password").value;
                        var cpassword = document.getElementById("cpassword").value;
                        
                        
                        var emailError = document.getElementById("emailError");
                        var fnameError = document.getElementById("fnameError");
                        var lnameError = document.getElementById("lnameError");
                        var mobileError = document.getElementById("mobileError");
                        var usernameError = document.getElementById("passwordError");
                        var passwordError = document.getElementById("passwordError");
                        var cpasswordError = document.getElementById("cpasswordError");
                        
                        var isValid = true;
                    
                    
                        // Validate email
                        if (email === "") {
                            emailError.textContent = "Email is required";
                            isValid = false;
                        } else {
                            var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                            if (!emailPattern.test(email)) {
                                emailError.textContent = "Invalid email format";
                                isValid = false;
                            } else {
                                emailError.textContent = "";
                            }
                        }

                        // Validate firstname
                        if (fname === "") {
                            fnameError.textContent = "Firstname is required";
                            isValid = false;
                        } else {
                            fnameError.textContent = "";
                        }

                        // Validate lastname 
                        if (lname === "") {
                            lnameError.textContent = "Lastname is required";
                            isValid = false;
                        } else {
                            lnameError.textContent = "";
                        }
                    
                         // Validate mobile number
                         if (mobile === "") {
                            mobileError.textContent = "Mobile number is required";
                            isValid = false;
                        } else {
                            // Regular expression to validate contact number format (assuming a 10-digit number)
                            var mobilePattern = /^\d{10}$/;
                            if (!mobilePattern.test(mobile)) {
                                mobileError.textContent = "Invalid mobile number format";
                                isValid = false;
                            } else {
                                mobileError.textContent = "";
                            }
                        }

                        // Validate password
                        if (password === "") {
                            passwordError.textContent = "Password is required";
                            isValid = false;
                        } else {
                            if (password.length < 8) {
                                passwordError.textContent = "Password must be at least 8 characters long";
                                isValid = false;
                            } else {
                                passwordError.textContent = "";
                            }
                        }
                    
                        
                    
                        return isValid;
                    }
                    </script>
            </div>
    </div>
    
</section>
{% endblock %}